export default class BoomArticle extends HTMLElement {
	connectedCallback() {
		this.innerHTML = ((html = "", attr = name => this.getAttribute(name)) => {
			html += "<div>";
			if(attr("banner") != "undefined") {
				html += `
				<div class="banner">
					<img src="${attr("banner")}" 
						alt="${attr("title")}"
						${attr("loading") ? 'loading="' + '"' : ''}
					>
				</div>`;
			}
			html += `<div class="details">`;
			if(attr("highlight") != "undefined") {
				html += `<span class="highlight">${attr("highlight")}</span>`;
			}
			html += `<h3>${attr("title")}</h3>`;
			if(attr("description")) {
				html += `<p>${attr("description")}</p>`;
			}
			html += fillTags(attr("tags"));
			return html + "</div>";
		})();
	}
}

function fillTags(tags, html = "") {
	if(tags != "undefined") {
		html += `<div class="tags">`;
			html += tags.split(",").reduce((html, item) => {
				return html + `<boom-item class="tag" 
					title="${item}"></boom-item>`;
			}, "");
			html += `</div>`;
	}
	
	return html;
}